## Abstract
R Tree는 공간 정보를  인덱싱하기 위한 트리 자료구조이다. 예를 들어서, 약국 좌표 정보를 저장하고, 현재 위치 정보를 기준으로 2 Km 이내의 약국을 알기 위한 쿼리를 하는 등의 동작을 할 수 있다.

## Idea
이 자료구조의 핵심적인 아이디어는 근처의 객체들을 하나로 그룹짓고, 그들의 [[MBR]](Minimum Bounding Rectangle)로 묶어 트리의 더 높은 레벨에 담는 방식이다. 아래 이미지가 조금 더 이해하기 쉽다.

![](https://upload.wikimedia.org/wikipedia/commons/thumb/6/6f/R-tree.svg/400px-R-tree.svg.png)

교차 지점인지 판단하기 위해 상위 레벨부터 쿼리와 교차 지점이 있는지 확인하는데, 상위 레벨에서 겹치지 않는다면, 하위 레벨이 무조건 겹치지 않는 것을 사용해 쿼리를 한다. 리프 노드에만 실제 객체가 담긴다.

[[B Tree]]와 유사한 점이 몇 가지 있다.
- `Balanced Search Tree`에 해당하기 때문에 리프 노드들의 깊이가 동일하다. 
- 페이지에 데이터를 구성한다.
- 디스크에 저장하기 위해 디자인 되었다.

각 페이지는 최대 저장할 수 있는 엔트리 숫자를 정의하는데, 이를 일반적으로 `M` 으로 표시한다. 또한, 최소로 채워져야 하는 숫자도 정의하는데, 트리의 최상의 퍼포먼스는 일반적으로 `M`의 30%, 40% 정도를 최소로 설정할 때 나타난다.

트리를 구성할 때는 잘 균형이 맞아서, 모든 노드들이 같은 높이에 있게 하는 부분과, 사각형이 너무 많은 빈 공간을 갖거나, 너무 많은 공간을 오버랩 하지 않게 해야 하는 이슈가 있다.

그래서 기존의 삽입 아이디어 중에는 서브 트리 중에서, `BBox`의 확장이 조금 일어나는 서브 트리에 엘리먼트를 추가하는 방식이 있었다. 페이지가 가득 차면, 그 데이터는 두 개의 세트로 나눠지는데, 각각 최소 구역을 커버하도록 나눴다.